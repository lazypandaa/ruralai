import{r as fe,a as Ne,g as ye}from"./vendor-D3F3s8fL.js";import{r as t,M as ie,L as be,G as ne,a as re,b as G,U as W,c as C,A as we,d as Se,T as X,e as Z,f as ee,P as ke,S as Ce,X as Re,g as Ae,C as Le,h as Pe,i as ze,j as Ie,k as Me,l as _e,R as Te}from"./utils-C5h0IOJR.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))N(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&N(u)}).observe(document,{childList:!0,subtree:!0});function d(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function N(r){if(r.ep)return;r.ep=!0;const n=d(r);fetch(r.href,n)}})();var Y={exports:{}},O={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var se;function Ee(){if(se)return O;se=1;var j=fe(),o=Symbol.for("react.element"),d=Symbol.for("react.fragment"),N=Object.prototype.hasOwnProperty,r=j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function u(l,p,y){var v,h={},f=null,g=null;y!==void 0&&(f=""+y),p.key!==void 0&&(f=""+p.key),p.ref!==void 0&&(g=p.ref);for(v in p)N.call(p,v)&&!n.hasOwnProperty(v)&&(h[v]=p[v]);if(l&&l.defaultProps)for(v in p=l.defaultProps,p)h[v]===void 0&&(h[v]=p[v]);return{$$typeof:o,type:l,key:f,ref:g,props:h,_owner:r.current}}return O.Fragment=d,O.jsx=u,O.jsxs=u,O}var ae;function $e(){return ae||(ae=1,Y.exports=Ee()),Y.exports}var e=$e(),F={},te;function Ue(){if(te)return F;te=1;var j=Ne();return F.createRoot=j.createRoot,F.hydrateRoot=j.hydrateRoot,F}var Be=Ue();const De=ye(Be),A="https://gramvaani-backend.onrender.com";console.log("ðŸš€ API_URL hardcoded to:",A);function Oe({onLogin:j}){const[o,d]=t.useState(!0),[N,r]=t.useState(!1),[n,u]=t.useState(""),[l,p]=t.useState({email:"",password:"",language:"en",location:""}),[y,v]=t.useState(!1),[h,f]=t.useState(""),g=async()=>{v(!0),f("Getting GPS location...");try{if(navigator.geolocation){const c=await new Promise((S,M)=>{navigator.geolocation.getCurrentPosition(S,M,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),{latitude:m,longitude:k}=c.coords;f("Getting address details...");const L=await C.post(`${A}/api/reverse-geocode`,{latitude:m,longitude:k});if(L.data.address){p(S=>({...S,location:L.data.address,coordinates:{latitude:m,longitude:k}})),f("GPS location detected");return}}}catch(c){console.log("GPS location failed, trying IP location:",c),f("Using IP location...")}try{const c=await C.get(`${A}/api/location`);c.data.location&&(p(m=>({...m,location:c.data.location})),f("IP-based location"))}catch(c){console.error("All location detection failed:",c),f("Location detection failed")}finally{v(!1),setTimeout(()=>f(""),3e3)}};t.useEffect(()=>{o||g()},[o]);const _=async c=>{c.preventDefault(),r(!0),u("");try{const m=o?"/api/login":"/api/signup",k=o?{email:l.email,password:l.password}:l,L=await C.post(`${A}${m}`,k);L.data.access_token&&(localStorage.setItem("token",L.data.access_token),j(L.data.access_token))}catch(m){u(m.response?.data?.detail||"Authentication failed")}finally{r(!1)}},b=c=>{p(m=>({...m,[c.target.name]:c.target.value}))};return e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-card",children:[e.jsxs("div",{className:"auth-header",children:[e.jsxs("div",{className:"auth-logo",children:[e.jsx("div",{className:"auth-logo-icon",children:"ðŸŒ¾"}),e.jsx("h2",{children:"Gram Vaani"})]}),e.jsx("p",{className:"auth-subtitle",children:o?"Welcome back to your AI assistant":"Join the rural revolution"})]}),e.jsxs("div",{className:"auth-toggle",children:[e.jsx("button",{className:`auth-toggle-btn ${o?"active":""}`,onClick:()=>d(!0),children:"Login"}),e.jsx("button",{className:`auth-toggle-btn ${o?"":"active"}`,onClick:()=>d(!1),children:"Sign Up"})]}),e.jsxs("form",{onSubmit:_,className:"auth-form",children:[e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"input-wrapper",children:[e.jsx(ie,{className:"input-icon",size:20}),e.jsx("input",{type:"email",name:"email",placeholder:"Email address",value:l.email,onChange:b,required:!0,className:"auth-input"})]})}),e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"input-wrapper",children:[e.jsx(be,{className:"input-icon",size:20}),e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:l.password,onChange:b,required:!0,className:"auth-input"})]})}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"input-wrapper",children:[e.jsx(ne,{className:"input-icon",size:20}),e.jsxs("select",{name:"language",value:l.language,onChange:b,className:"auth-select",children:[e.jsx("option",{value:"en",children:"ðŸ‡ºðŸ‡¸ English"}),e.jsx("option",{value:"hi",children:"ðŸ‡®ðŸ‡³ Hindi"}),e.jsx("option",{value:"mr",children:"ðŸ‡®ðŸ‡³ Marathi"}),e.jsx("option",{value:"bn",children:"ðŸ‡®ðŸ‡³ Bengali"}),e.jsx("option",{value:"ta",children:"ðŸ‡®ðŸ‡³ Tamil"}),e.jsx("option",{value:"te",children:"ðŸ‡®ðŸ‡³ Telugu"})]})]})}),e.jsxs("div",{className:"form-group",children:[e.jsxs("div",{className:"input-wrapper",children:[e.jsx(re,{className:"input-icon",size:20}),e.jsx("input",{type:"text",name:"location",placeholder:"Location (GPS auto-detected)",value:l.location,onChange:b,required:!0,className:"auth-input"}),e.jsx("button",{type:"button",onClick:g,disabled:y,className:"location-btn",title:"Get precise GPS location",children:y?e.jsx(G,{className:"loading",size:16}):"ðŸŽ¯"})]}),h&&e.jsx("div",{className:"location-status",children:h})]})]}),n&&e.jsx("div",{className:"auth-error",children:n}),e.jsx("button",{type:"submit",disabled:N,className:"auth-submit",children:N?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"loading",size:20}),o?"Signing in...":"Creating account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{size:20}),o?"Sign In":"Create Account"]})})]}),e.jsx("div",{className:"auth-footer",children:e.jsxs("p",{children:[o?"Don't have an account? ":"Already have an account? ",e.jsx("button",{type:"button",onClick:()=>d(!o),className:"auth-link",children:o?"Sign up":"Sign in"})]})})]})})}function We({user:j,onBack:o,onUserUpdate:d}){const[N,r]=t.useState(!1),[n,u]=t.useState({email:j?.email||"",language:j?.language||"en",location:j?.location||""}),[l,p]=t.useState([]),[y,v]=t.useState(!1),[h,f]=t.useState(""),[g,_]=t.useState({total:0,thisWeek:0,types:{}}),[b,c]=t.useState(!1),[m,k]=t.useState("profile");t.useEffect(()=>{L()},[]);const L=async()=>{try{const a=localStorage.getItem("token"),z=(await C.get("http://localhost:8000/api/user-queries",{headers:{Authorization:`Bearer ${a}`}})).data.queries||[];p(z),S(z)}catch(a){console.error("Failed to fetch queries:",a)}},S=a=>{const w=new Date,z=new Date(w.getTime()-10080*60*1e3),q=a.filter(E=>new Date(E.timestamp)>z).length,T=a.reduce((E,D)=>(E[D.type]=(E[D.type]||0)+1,E),{});_({total:a.length,thisWeek:q,types:T})},M=async()=>{v(!0),f("");try{const a=localStorage.getItem("token");await C.put("http://localhost:8000/api/profile",n,{headers:{Authorization:`Bearer ${a}`}}),d(n),r(!1)}catch{f("Failed to update profile")}finally{v(!1)}},H=()=>{u({email:j?.email||"",language:j?.language||"en",location:j?.location||""}),r(!1),f("")},U=a=>{switch(a){case"voice":return"ðŸŽ¤";case"text":return"âœï¸";case"weather":return"ðŸŒ¤ï¸";case"crop":return"ðŸŒ¾";case"schemes":return"ðŸ›ï¸";default:return"ðŸ’¬"}},x=a=>{switch(a){case"voice":return"#8b5cf6";case"text":return"#06b6d4";case"weather":return"#f59e0b";case"crop":return"#10b981";case"schemes":return"#ef4444";default:return"#6b7280"}};return e.jsxs("div",{className:"profile-container",children:[e.jsxs("div",{className:"profile-hero",children:[e.jsx("div",{className:"hero-background"}),e.jsxs("div",{className:"hero-content",children:[e.jsxs("button",{onClick:o,className:"back-button",children:[e.jsx(we,{size:20}),"Back to Dashboard"]}),e.jsxs("div",{className:"profile-avatar",children:[e.jsx("div",{className:"avatar-circle",children:e.jsx(W,{size:40})}),e.jsx("div",{className:"avatar-status"})]}),e.jsx("h1",{className:"profile-title",children:"Welcome back!"}),e.jsx("p",{className:"profile-subtitle",children:j?.email})]})]}),e.jsxs("div",{className:"profile-content",children:[e.jsx("div",{className:"mobile-menu-toggle",children:e.jsxs("button",{onClick:()=>c(!b),className:"menu-button",children:[e.jsx(Se,{size:24}),"Menu"]})}),e.jsxs("div",{className:`mobile-menu ${b?"show":""}`,children:[e.jsxs("button",{className:`menu-item ${m==="profile"?"active":""}`,onClick:()=>{k("profile"),c(!1)},children:[e.jsx(W,{size:20}),"Profile"]}),e.jsxs("button",{className:`menu-item ${m==="stats"?"active":""}`,onClick:()=>{k("stats"),c(!1)},children:[e.jsx(X,{size:20}),"Activity Stats"]}),e.jsxs("button",{className:`menu-item ${m==="types"?"active":""}`,onClick:()=>{k("types"),c(!1)},children:[e.jsx(Z,{size:20}),"Query Types"]}),e.jsxs("button",{className:`menu-item ${m==="history"?"active":""}`,onClick:()=>{k("history"),c(!1)},children:[e.jsx(ee,{size:20}),"Query History"]})]}),e.jsxs("div",{className:"profile-grid",children:[e.jsxs("div",{className:"profile-main",children:[(m==="profile"||window.innerWidth>768)&&e.jsxs("div",{className:"profile-card glass-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"header-icon",children:e.jsx(W,{size:24})}),e.jsxs("div",{className:"header-content",children:[e.jsx("h3",{children:"Profile Information"}),e.jsx("p",{children:"Manage your personal details"})]}),N?e.jsxs("div",{className:"edit-actions",children:[e.jsxs("button",{onClick:M,disabled:y,className:"save-button",children:[e.jsx(Ce,{size:16}),y?"Saving...":"Save"]}),e.jsx("button",{onClick:H,className:"cancel-button",children:e.jsx(Re,{size:16})})]}):e.jsxs("button",{onClick:()=>r(!0),className:"edit-button",children:[e.jsx(ke,{size:16}),"Edit"]})]}),h&&e.jsx("div",{className:"error-message",children:h}),e.jsxs("div",{className:"profile-fields",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("div",{className:"field-icon",children:e.jsx(ie,{size:20})}),e.jsxs("div",{className:"field-content",children:[e.jsx("label",{children:"Email Address"}),N?e.jsx("input",{type:"email",value:n.email,onChange:a=>u({...n,email:a.target.value}),className:"field-input"}):e.jsx("div",{className:"field-value",children:j?.email})]})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("div",{className:"field-icon",children:e.jsx(ne,{size:20})}),e.jsxs("div",{className:"field-content",children:[e.jsx("label",{children:"Preferred Language"}),N?e.jsxs("select",{value:n.language,onChange:a=>u({...n,language:a.target.value}),className:"field-select",children:[e.jsx("option",{value:"en",children:"ðŸ‡ºðŸ‡¸ English"}),e.jsx("option",{value:"hi",children:"ðŸ‡®ðŸ‡³ Hindi"}),e.jsx("option",{value:"mr",children:"ðŸ‡®ðŸ‡³ Marathi"}),e.jsx("option",{value:"bn",children:"ðŸ‡®ðŸ‡³ Bengali"}),e.jsx("option",{value:"ta",children:"ðŸ‡®ðŸ‡³ Tamil"}),e.jsx("option",{value:"te",children:"ðŸ‡®ðŸ‡³ Telugu"})]}):e.jsxs("div",{className:"field-value",children:[n.language==="en"&&"ðŸ‡ºðŸ‡¸ English",n.language==="hi"&&"ðŸ‡®ðŸ‡³ Hindi",n.language==="mr"&&"ðŸ‡®ðŸ‡³ Marathi",n.language==="bn"&&"ðŸ‡®ðŸ‡³ Bengali",n.language==="ta"&&"ðŸ‡®ðŸ‡³ Tamil",n.language==="te"&&"ðŸ‡®ðŸ‡³ Telugu"]})]})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("div",{className:"field-icon",children:e.jsx(re,{size:20})}),e.jsxs("div",{className:"field-content",children:[e.jsx("label",{children:"Location"}),N?e.jsx("input",{type:"text",value:n.location,onChange:a=>u({...n,location:a.target.value}),placeholder:"City, State",className:"field-input"}):e.jsxs("div",{className:"field-value",children:["ðŸ“ ",j?.location]})]})]})]})]}),(m==="history"||window.innerWidth>768)&&e.jsxs("div",{className:"activity-card glass-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"header-icon",children:e.jsx(ee,{size:24})}),e.jsxs("div",{className:"header-content",children:[e.jsx("h3",{children:"Query History"}),e.jsx("p",{children:"Your recent interactions with Gram Vaani"})]})]}),l.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"ðŸ’¬"}),e.jsx("h4",{children:"No queries yet"}),e.jsx("p",{children:"Start asking questions to see your history here!"})]}):e.jsx("div",{className:"queries-timeline",children:l.slice(0,10).map((a,w)=>e.jsxs("div",{className:"timeline-item",children:[e.jsx("div",{className:"timeline-marker",style:{backgroundColor:x(a.type)},children:e.jsx("span",{children:U(a.type)})}),e.jsxs("div",{className:"timeline-content",children:[e.jsxs("div",{className:"timeline-header",children:[e.jsx("span",{className:"query-type-badge",style:{backgroundColor:x(a.type)},children:a.type}),e.jsx("span",{className:"query-time",children:new Date(a.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:"query-text",children:a.query}),a.response&&e.jsx("div",{className:"query-response",children:a.response.length>120?`${a.response.substring(0,120)}...`:a.response})]})]},w))})]})]}),e.jsxs("div",{className:"profile-sidebar",children:[(m==="stats"||window.innerWidth>768)&&e.jsxs("div",{className:"stats-card glass-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"header-icon",children:e.jsx(X,{size:24})}),e.jsxs("div",{className:"header-content",children:[e.jsx("h3",{children:"Activity Stats"}),e.jsx("p",{children:"Your usage overview"})]})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(Ae,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:g.total}),e.jsx("div",{className:"stat-label",children:"Total Queries"})]})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(Le,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:g.thisWeek}),e.jsx("div",{className:"stat-label",children:"This Week"})]})]})]})]}),(m==="types"||window.innerWidth>768)&&e.jsxs("div",{className:"types-card glass-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"header-icon",children:e.jsx(Z,{size:24})}),e.jsxs("div",{className:"header-content",children:[e.jsx("h3",{children:"Query Types"}),e.jsx("p",{children:"What you ask about most"})]})]}),e.jsx("div",{className:"types-list",children:Object.entries(g.types).map(([a,w])=>e.jsxs("div",{className:"type-item",children:[e.jsx("div",{className:"type-icon",style:{backgroundColor:x(a)},children:U(a)}),e.jsxs("div",{className:"type-content",children:[e.jsx("div",{className:"type-name",children:a}),e.jsxs("div",{className:"type-count",children:[w," queries"]})]}),e.jsx("div",{className:"type-bar",children:e.jsx("div",{className:"type-progress",style:{width:`${w/g.total*100}%`,backgroundColor:x(a)}})})]},a))})]})]})]})]})]})}function qe(){const[j,o]=t.useState(!1),[d,N]=t.useState(null),[r,n]=t.useState(!1),[u,l]=t.useState(!1),[p,y]=t.useState(""),[v,h]=t.useState(""),[f,g]=t.useState(null),[_,b]=t.useState(!1),[c,m]=t.useState(""),[k,L]=t.useState("voice"),[S,M]=t.useState("en"),[H,U]=t.useState(!1),[x,a]=t.useState(""),[w,z]=t.useState(""),[q,T]=t.useState(""),[E,D]=t.useState(!1),B=t.useRef(null),R=t.useRef(null),Q=t.useRef([]);t.useEffect(()=>{oe()},[]);const oe=async()=>{const s=localStorage.getItem("token");if(s)try{const i=await C.get(`${A}/api/me`,{headers:{Authorization:`Bearer ${s}`}});N(i.data),M(i.data.language),o(!0)}catch{localStorage.removeItem("token"),o(!1)}},ce=async s=>{try{const i=await C.get(`${A}/api/me`,{headers:{Authorization:`Bearer ${s}`}});N(i.data),M(i.data.language),o(!0)}catch{localStorage.removeItem("token")}},le=()=>{localStorage.removeItem("token"),o(!1),N(null),y(""),h(""),g(null)},de=async()=>{try{h(""),y(""),g(null);const s=await navigator.mediaDevices.getUserMedia({audio:!0});B.current=new MediaRecorder(s),Q.current=[],B.current.ondataavailable=i=>{Q.current.push(i.data)},B.current.onstop=async()=>{const i=new Blob(Q.current,{type:"audio/wav"});await he(i),s.getTracks().forEach(P=>P.stop())},B.current.start(),n(!0)}catch{h("Microphone access denied. Please allow microphone access and try again.")}},ue=()=>{B.current&&r&&(B.current.stop(),n(!1))},he=async s=>{l(!0),h("");try{const i=localStorage.getItem("token"),P=new FormData;P.append("file",s),P.append("language",S);const I=await C.post(`${A}/process-audio`,P,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${i}`}});if(y({transcript:I.data.transcript,response_text:I.data.response_text}),I.data.audio_data){const $=new Blob([Uint8Array.from(atob(I.data.audio_data),ve=>ve.charCodeAt(0))],{type:"audio/wav"}),ge=URL.createObjectURL($);g(ge),setTimeout(()=>{R.current&&(R.current.play(),b(!0))},100)}}catch(i){h("Failed to process audio"),console.error(i)}finally{l(!1)}},me=async()=>{if(!c.trim()){h("Please enter some text to process.");return}l(!0),h(""),y(""),g(null);try{const s=localStorage.getItem("token"),i=await C.post(`${A}/process-text`,{text:c.trim(),language:S},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(y({transcript:c,response_text:i.data.response_text||i.data}),i.data.audio_data){const P=new Blob([Uint8Array.from(atob(i.data.audio_data),$=>$.charCodeAt(0))],{type:"audio/wav"}),I=URL.createObjectURL(P);g(I),setTimeout(()=>{R.current&&(R.current.play(),b(!0))},100)}}catch(s){const i=s.response?.data?.detail||"Failed to process text. Please try again.";h(i),console.error("Error processing text:",s)}finally{l(!1)}},pe=()=>{R.current&&(_?(R.current.pause(),b(!1)):(R.current.play(),b(!0)))},xe=()=>b(!1),J=s=>{if(a(s),s==="weather"&&d?.location){const i=d.location.split(",")[0].trim();z(i)}else z("");s==="crop"&&d?.location?T(d.location):T(""),U(!0)},je=async()=>{l(!0),h(""),y(""),g(null);try{const s=localStorage.getItem("token"),i=await C.post(`${A}/api/weather`,{city:"current",language:S},{headers:{Authorization:`Bearer ${s}`}});if(y({transcript:`Weather for my location (${d?.location})`,response_text:i.data.text}),i.data.audio_data){const P=new Blob([Uint8Array.from(atob(i.data.audio_data),$=>$.charCodeAt(0))],{type:"audio/wav"}),I=URL.createObjectURL(P);g(I),setTimeout(()=>{R.current&&(R.current.play(),b(!0))},100)}}catch{h("Unable to fetch weather information for your location.")}finally{l(!1)}},V=()=>{U(!1),z(""),T("")},K=async()=>{if(w.trim()){U(!1),l(!0);try{const s=localStorage.getItem("token");let i;if(x==="weather"?i=await C.post(`${A}/api/weather`,{city:w,language:S},{headers:{Authorization:`Bearer ${s}`}}):x==="crop"?i=await C.post(`${A}/api/crop-prices`,{crop:w,market:q||void 0,language:S},{headers:{Authorization:`Bearer ${s}`}}):x==="schemes"&&(i=await C.post(`${A}/api/gov-schemes`,{topic:w,language:S},{headers:{Authorization:`Bearer ${s}`}})),y({transcript:w,response_text:i.data.text}),i.data.audio_data){const P=new Blob([Uint8Array.from(atob(i.data.audio_data),$=>$.charCodeAt(0))],{type:"audio/wav"}),I=URL.createObjectURL(P);g(I),setTimeout(()=>{R.current&&(R.current.play(),b(!0))},100)}}catch{h(`Unable to fetch ${x} information.`)}finally{l(!1),z(""),T("")}}};return j?E?e.jsx(We,{user:d,onBack:()=>D(!1),onUserUpdate:s=>N({...d,...s})}):e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"header",children:e.jsxs("div",{className:"logo",children:[e.jsx("div",{className:"logo-icon",children:"ðŸŒ¾"}),e.jsxs("div",{className:"logo-text",children:[e.jsx("h1",{children:"Gram Vaani"}),e.jsx("p",{children:"AI Voice Assistant for Rural India"})]}),e.jsxs("div",{className:"user-info",children:[e.jsxs("div",{className:"user-details",children:[e.jsx("span",{className:"user-email",children:d?.email}),e.jsxs("span",{className:"user-location",children:["ðŸ“ ",d?.location]})]}),e.jsxs("div",{className:"user-actions",children:[e.jsx("button",{onClick:()=>D(!0),className:"profile-btn",children:e.jsx(W,{size:20})}),e.jsx("button",{onClick:le,className:"logout-btn",children:e.jsx(Pe,{size:20})})]})]})]})}),e.jsxs("div",{className:"main-card",children:[e.jsxs("div",{className:"input-mode-selector",children:[e.jsx("button",{className:`mode-button ${k==="voice"?"active":""}`,onClick:()=>L("voice"),children:"ðŸŽ¤ Voice"}),e.jsx("button",{className:`mode-button ${k==="text"?"active":""}`,onClick:()=>L("text"),children:"âœ Text"})]}),k==="voice"?e.jsxs("div",{className:"voice-section",children:[e.jsx("button",{className:`voice-button ${r?"recording":""}`,onClick:r?ue:de,disabled:u,children:u?e.jsx(G,{className:"loading"}):r?e.jsx(ze,{size:40}):e.jsx(Ie,{size:40})}),e.jsx("div",{className:"status-text",children:r?"ðŸŽ¤ Listening... Click to stop":u?"ðŸ¤– Processing your request...":"ðŸ‘† Click to speak in your local dialect"}),e.jsxs("div",{className:"language-selector-inline",children:[e.jsx("div",{className:"language-icon",children:"ðŸŒ"}),e.jsxs("select",{value:S,onChange:s=>M(s.target.value),children:[e.jsx("option",{value:"en",children:"ðŸ‡ºðŸ‡¸ English"}),e.jsx("option",{value:"hi",children:"ðŸ‡®ðŸ‡³ Hindi"}),e.jsx("option",{value:"mr",children:"ðŸ‡®ðŸ‡³ Marathi"}),e.jsx("option",{value:"bn",children:"ðŸ‡®ðŸ‡³ Bengali"}),e.jsx("option",{value:"ta",children:"ðŸ‡®ðŸ‡³ Tamil"}),e.jsx("option",{value:"te",children:"ðŸ‡®ðŸ‡³ Telugu"})]})]})]}):e.jsxs("div",{className:"text-section",children:[e.jsx("textarea",{value:c,onChange:s=>m(s.target.value),placeholder:"Type your question here...",className:"text-input",rows:3,disabled:u}),e.jsxs("div",{className:"text-controls",children:[e.jsx("button",{className:"submit-button",onClick:me,disabled:u||!c.trim(),children:u?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"loading",size:16})," Processing..."]}):"Submit Question"}),e.jsxs("div",{className:"language-selector-inline",children:[e.jsx("div",{className:"language-icon",children:"ðŸŒ"}),e.jsxs("select",{value:S,onChange:s=>M(s.target.value),children:[e.jsx("option",{value:"en",children:"ðŸ‡ºðŸ‡¸ English"}),e.jsx("option",{value:"hi",children:"ðŸ‡®ðŸ‡³ Hindi"}),e.jsx("option",{value:"mr",children:"ðŸ‡®ðŸ‡³ Marathi"}),e.jsx("option",{value:"bn",children:"ðŸ‡®ðŸ‡³ Bengali"}),e.jsx("option",{value:"ta",children:"ðŸ‡®ðŸ‡³ Tamil"}),e.jsx("option",{value:"te",children:"ðŸ‡®ðŸ‡³ Telugu"})]})]})]})]}),e.jsxs("div",{className:"feature-buttons",children:[e.jsxs("button",{className:"feature-card",onClick:je,disabled:u,children:[e.jsx("div",{className:"icon",children:"ðŸŒ¤"}),e.jsx("div",{className:"title",children:"My Weather"}),e.jsxs("div",{className:"description",children:["Current weather for ",d?.location?.split(",")[0]||"your location"]})]}),e.jsxs("button",{className:"feature-card",onClick:()=>J("weather"),children:[e.jsx("div",{className:"icon",children:"ðŸŒ"}),e.jsx("div",{className:"title",children:"Other City Weather"}),e.jsx("div",{className:"description",children:"Check weather for any city"})]}),e.jsxs("button",{className:"feature-card",onClick:()=>J("crop"),children:[e.jsx("div",{className:"icon",children:"ðŸ’°"}),e.jsx("div",{className:"title",children:"Crop Prices"}),e.jsx("div",{className:"description",children:"Check prices for any crop"})]}),e.jsxs("button",{className:"feature-card",onClick:()=>J("schemes"),children:[e.jsx("div",{className:"icon",children:"ðŸ›"}),e.jsx("div",{className:"title",children:"Govt Schemes"}),e.jsx("div",{className:"description",children:"Learn about government schemes"})]})]}),v&&e.jsx("div",{className:"error-message",children:v}),p&&e.jsxs("div",{className:"response-section",children:[e.jsx("h3",{children:"ðŸ“ What you said:"}),e.jsx("p",{className:"response-text",children:p.transcript}),e.jsx("h3",{children:"ðŸ’¬ Response:"}),e.jsx("p",{className:"response-text",children:p.response_text}),f&&e.jsxs("div",{className:"audio-controls",children:[e.jsxs("button",{className:"play-button",onClick:pe,children:[_?e.jsx(Me,{size:20}):e.jsx(_e,{size:20}),_?"Pause":"Play Response"]}),e.jsx("audio",{ref:R,src:f,onEnded:xe})]})]})]}),H&&e.jsx("div",{className:"modal-overlay",onClick:V,children:e.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[x==="weather"&&"ðŸŒ¤ Weather Information",x==="crop"&&"ðŸ’° Crop Prices",x==="schemes"&&"ðŸ› Government Schemes"]}),e.jsx("button",{className:"close-button",onClick:V,children:"Ã—"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("label",{children:[x==="weather"&&"Enter city name:",x==="crop"&&"Enter crop name:",x==="schemes"&&"Enter topic (e.g., irrigation, fertilizer):"]}),e.jsx("input",{type:"text",value:w,onChange:s=>z(s.target.value),placeholder:x==="weather"?"e.g., Delhi, Mumbai, Bangalore":x==="crop"?"e.g., Rice, Wheat, Cotton, Sugarcane":"e.g., Irrigation, Seeds, Fertilizer, Loan",onKeyPress:s=>s.key==="Enter"&&K(),autoFocus:!0}),x==="crop"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{style:{marginTop:"15px",display:"block"},children:"Location (market):"}),e.jsx("input",{type:"text",value:q,onChange:s=>T(s.target.value),placeholder:"e.g., Delhi, Mumbai (defaults to your location)",onKeyPress:s=>s.key==="Enter"&&K()})]}),x==="weather"&&e.jsxs("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px"},children:['ðŸ’¡ Tip: Use "My Weather" button above for your location (',d?.location,")"]}),x==="crop"&&e.jsxs("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px"},children:["ðŸ’¡ Location defaults to: ",d?.location||"your profile location"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"cancel-button",onClick:V,children:"Cancel"}),e.jsx("button",{className:"submit-button",onClick:K,disabled:!w.trim(),children:"Get Information"})]})]})})]}):e.jsx(Oe,{onLogin:ce})}De.createRoot(document.getElementById("root")).render(e.jsx(Te.StrictMode,{children:e.jsx(qe,{})}));
