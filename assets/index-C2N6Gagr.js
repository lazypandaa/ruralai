import{r as Ne,a as ye,g as be}from"./vendor-D3F3s8fL.js";import{a as L,r as a,M as ne,L as we,G as re,b as oe,c as H,U as q,A as Se,d as ke,T as Z,e as ee,f as se,P as Ce,S as Re,X as Pe,g as Le,C as Ae,h as ze,i as _e,j as Ie,k as Me,l as Te,R as Ee}from"./utils-D5qe4E-D.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))g(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&g(h)}).observe(document,{childList:!0,subtree:!0});function d(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function g(o){if(o.ep)return;o.ep=!0;const r=d(o);fetch(o.href,r)}})();var X={exports:{}},O={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var te;function Ue(){if(te)return O;te=1;var c=Ne(),i=Symbol.for("react.element"),d=Symbol.for("react.fragment"),g=Object.prototype.hasOwnProperty,o=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function h(u,x,y){var f,m={},N=null,v=null;y!==void 0&&(N=""+y),x.key!==void 0&&(N=""+x.key),x.ref!==void 0&&(v=x.ref);for(f in x)g.call(x,f)&&!r.hasOwnProperty(f)&&(m[f]=x[f]);if(u&&u.defaultProps)for(f in x=u.defaultProps,x)m[f]===void 0&&(m[f]=x[f]);return{$$typeof:i,type:u,key:N,ref:v,props:m,_owner:o.current}}return O.Fragment=d,O.jsx=h,O.jsxs=h,O}var ae;function $e(){return ae||(ae=1,X.exports=Ue()),X.exports}var e=$e(),G={},ie;function Be(){if(ie)return G;ie=1;var c=ye();return G.createRoot=c.createRoot,G.hydrateRoot=c.hydrateRoot,G}var De=Be();const Oe=be(De),_="https://gramvaani-backend.onrender.com";console.log("ðŸš€ API_URL hardcoded to:",_);const W=L.create({baseURL:_,timeout:3e4});W.interceptors.response.use(c=>c,async c=>{const i=c.config;if((!c.response||c.response.status>=500)&&i&&!i.__isRetryRequest&&i.retryCount<3){i.__isRetryRequest=!0,i.retryCount=(i.retryCount||0)+1;const d=Math.pow(2,i.retryCount)*1e3;return await new Promise(g=>setTimeout(g,d)),W(i)}return Promise.reject(c)});function qe({onLogin:c}){const[i,d]=a.useState(!0),[g,o]=a.useState(!1),[r,h]=a.useState(""),[u,x]=a.useState({email:"",password:"",language:"en",location:""}),[y,f]=a.useState(!1),[m,N]=a.useState(""),v=async()=>{f(!0),N("Getting GPS location...");try{if(navigator.geolocation){const l=await new Promise((S,I)=>{navigator.geolocation.getCurrentPosition(S,I,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),{latitude:p,longitude:k}=l.coords;N("Getting address details...");const R=await W.post("/api/reverse-geocode",{latitude:p,longitude:k});if(R.data.address){x(S=>({...S,location:R.data.address,coordinates:{latitude:p,longitude:k}})),N("GPS location detected");return}}}catch(l){console.log("GPS location failed, trying IP location:",l),N("Using IP location...")}try{const l=await W.get("/api/location");l.data.location&&(x(p=>({...p,location:l.data.location})),N("IP-based location"))}catch(l){console.error("All location detection failed:",l),N("Location detection failed")}finally{f(!1),setTimeout(()=>N(""),3e3)}};a.useEffect(()=>{i||v()},[i]);const M=async l=>{l.preventDefault(),o(!0),h("");try{const p=i?"/api/login":"/api/signup",k=i?{email:u.email,password:u.password}:u,R=await W.post(p,k);R.data.access_token&&(localStorage.setItem("token",R.data.access_token),c(R.data.access_token))}catch(p){h(p.response?.data?.detail||"Authentication failed")}finally{o(!1)}},b=l=>{x(p=>({...p,[l.target.name]:l.target.value}))};return e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-card",children:[e.jsxs("div",{className:"auth-header",children:[e.jsxs("div",{className:"auth-logo",children:[e.jsx("div",{className:"auth-logo-icon",children:"ðŸŒ¾"}),e.jsx("h2",{children:"Gram Vaani"})]}),e.jsx("p",{className:"auth-subtitle",children:i?"Welcome back to your AI assistant":"Join the rural revolution"})]}),e.jsxs("div",{className:"auth-toggle",children:[e.jsx("button",{className:`auth-toggle-btn ${i?"active":""}`,onClick:()=>d(!0),children:"Login"}),e.jsx("button",{className:`auth-toggle-btn ${i?"":"active"}`,onClick:()=>d(!1),children:"Sign Up"})]}),e.jsxs("form",{onSubmit:M,className:"auth-form",children:[e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"input-wrapper",children:[e.jsx(ne,{className:"input-icon",size:20}),e.jsx("input",{type:"email",name:"email",placeholder:"Email address",value:u.email,onChange:b,required:!0,className:"auth-input"})]})}),e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"input-wrapper",children:[e.jsx(we,{className:"input-icon",size:20}),e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:u.password,onChange:b,required:!0,className:"auth-input"})]})}),!i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"input-wrapper",children:[e.jsx(re,{className:"input-icon",size:20}),e.jsxs("select",{name:"language",value:u.language,onChange:b,className:"auth-select",children:[e.jsx("option",{value:"en",children:"ðŸ‡ºðŸ‡¸ English"}),e.jsx("option",{value:"hi",children:"ðŸ‡®ðŸ‡³ Hindi"}),e.jsx("option",{value:"mr",children:"ðŸ‡®ðŸ‡³ Marathi"}),e.jsx("option",{value:"bn",children:"ðŸ‡®ðŸ‡³ Bengali"}),e.jsx("option",{value:"ta",children:"ðŸ‡®ðŸ‡³ Tamil"}),e.jsx("option",{value:"te",children:"ðŸ‡®ðŸ‡³ Telugu"})]})]})}),e.jsxs("div",{className:"form-group",children:[e.jsxs("div",{className:"input-wrapper",children:[e.jsx(oe,{className:"input-icon",size:20}),e.jsx("input",{type:"text",name:"location",placeholder:"Location (GPS auto-detected)",value:u.location,onChange:b,required:!0,className:"auth-input"}),e.jsx("button",{type:"button",onClick:v,disabled:y,className:"location-btn",title:"Get precise GPS location",children:y?e.jsx(H,{className:"loading",size:16}):"ðŸŽ¯"})]}),m&&e.jsx("div",{className:"location-status",children:m})]})]}),r&&e.jsx("div",{className:"auth-error",children:r}),e.jsx("button",{type:"submit",disabled:g,className:"auth-submit",children:g?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"loading",size:20}),i?"Signing in...":"Creating account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{size:20}),i?"Sign In":"Create Account"]})})]}),e.jsx("div",{className:"auth-footer",children:e.jsxs("p",{children:[i?"Don't have an account? ":"Already have an account? ",e.jsx("button",{type:"button",onClick:()=>d(!i),className:"auth-link",children:i?"Sign up":"Sign in"})]})})]})})}function We({user:c,onBack:i,onUserUpdate:d}){const[g,o]=a.useState(!1),[r,h]=a.useState({email:c?.email||"",language:c?.language||"en",location:c?.location||""}),[u,x]=a.useState([]),[y,f]=a.useState(!1),[m,N]=a.useState(""),[v,M]=a.useState({total:0,thisWeek:0,types:{}}),[b,l]=a.useState(!1),[p,k]=a.useState("profile");a.useEffect(()=>{R()},[]);const R=async()=>{try{const t=localStorage.getItem("token"),A=(await L.get("http://localhost:8000/api/user-queries",{headers:{Authorization:`Bearer ${t}`}})).data.queries||[];x(A),S(A)}catch(t){console.error("Failed to fetch queries:",t)}},S=t=>{const w=new Date,A=new Date(w.getTime()-10080*60*1e3),F=t.filter(E=>new Date(E.timestamp)>A).length,T=t.reduce((E,D)=>(E[D.type]=(E[D.type]||0)+1,E),{});M({total:t.length,thisWeek:F,types:T})},I=async()=>{f(!0),N("");try{const t=localStorage.getItem("token");await L.put("http://localhost:8000/api/profile",r,{headers:{Authorization:`Bearer ${t}`}}),d(r),o(!1)}catch{N("Failed to update profile")}finally{f(!1)}},Q=()=>{h({email:c?.email||"",language:c?.language||"en",location:c?.location||""}),o(!1),N("")},$=t=>{switch(t){case"voice":return"ðŸŽ¤";case"text":return"âœï¸";case"weather":return"ðŸŒ¤ï¸";case"crop":return"ðŸŒ¾";case"schemes":return"ðŸ›ï¸";default:return"ðŸ’¬"}},j=t=>{switch(t){case"voice":return"#8b5cf6";case"text":return"#06b6d4";case"weather":return"#f59e0b";case"crop":return"#10b981";case"schemes":return"#ef4444";default:return"#6b7280"}};return e.jsxs("div",{className:"profile-container",children:[e.jsxs("div",{className:"profile-hero",children:[e.jsx("div",{className:"hero-background"}),e.jsxs("div",{className:"hero-content",children:[e.jsxs("button",{onClick:i,className:"back-button",children:[e.jsx(Se,{size:20}),"Back to Dashboard"]}),e.jsxs("div",{className:"profile-avatar",children:[e.jsx("div",{className:"avatar-circle",children:e.jsx(q,{size:40})}),e.jsx("div",{className:"avatar-status"})]}),e.jsx("h1",{className:"profile-title",children:"Welcome back!"}),e.jsx("p",{className:"profile-subtitle",children:c?.email})]})]}),e.jsxs("div",{className:"profile-content",children:[e.jsx("div",{className:"mobile-menu-toggle",children:e.jsxs("button",{onClick:()=>l(!b),className:"menu-button",children:[e.jsx(ke,{size:24}),"Menu"]})}),e.jsxs("div",{className:`mobile-menu ${b?"show":""}`,children:[e.jsxs("button",{className:`menu-item ${p==="profile"?"active":""}`,onClick:()=>{k("profile"),l(!1)},children:[e.jsx(q,{size:20}),"Profile"]}),e.jsxs("button",{className:`menu-item ${p==="stats"?"active":""}`,onClick:()=>{k("stats"),l(!1)},children:[e.jsx(Z,{size:20}),"Activity Stats"]}),e.jsxs("button",{className:`menu-item ${p==="types"?"active":""}`,onClick:()=>{k("types"),l(!1)},children:[e.jsx(ee,{size:20}),"Query Types"]}),e.jsxs("button",{className:`menu-item ${p==="history"?"active":""}`,onClick:()=>{k("history"),l(!1)},children:[e.jsx(se,{size:20}),"Query History"]})]}),e.jsxs("div",{className:"profile-grid",children:[e.jsxs("div",{className:"profile-main",children:[(p==="profile"||window.innerWidth>768)&&e.jsxs("div",{className:"profile-card glass-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"header-icon",children:e.jsx(q,{size:24})}),e.jsxs("div",{className:"header-content",children:[e.jsx("h3",{children:"Profile Information"}),e.jsx("p",{children:"Manage your personal details"})]}),g?e.jsxs("div",{className:"edit-actions",children:[e.jsxs("button",{onClick:I,disabled:y,className:"save-button",children:[e.jsx(Re,{size:16}),y?"Saving...":"Save"]}),e.jsx("button",{onClick:Q,className:"cancel-button",children:e.jsx(Pe,{size:16})})]}):e.jsxs("button",{onClick:()=>o(!0),className:"edit-button",children:[e.jsx(Ce,{size:16}),"Edit"]})]}),m&&e.jsx("div",{className:"error-message",children:m}),e.jsxs("div",{className:"profile-fields",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("div",{className:"field-icon",children:e.jsx(ne,{size:20})}),e.jsxs("div",{className:"field-content",children:[e.jsx("label",{children:"Email Address"}),g?e.jsx("input",{type:"email",value:r.email,onChange:t=>h({...r,email:t.target.value}),className:"field-input"}):e.jsx("div",{className:"field-value",children:c?.email})]})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("div",{className:"field-icon",children:e.jsx(re,{size:20})}),e.jsxs("div",{className:"field-content",children:[e.jsx("label",{children:"Preferred Language"}),g?e.jsxs("select",{value:r.language,onChange:t=>h({...r,language:t.target.value}),className:"field-select",children:[e.jsx("option",{value:"en",children:"ðŸ‡ºðŸ‡¸ English"}),e.jsx("option",{value:"hi",children:"ðŸ‡®ðŸ‡³ Hindi"}),e.jsx("option",{value:"mr",children:"ðŸ‡®ðŸ‡³ Marathi"}),e.jsx("option",{value:"bn",children:"ðŸ‡®ðŸ‡³ Bengali"}),e.jsx("option",{value:"ta",children:"ðŸ‡®ðŸ‡³ Tamil"}),e.jsx("option",{value:"te",children:"ðŸ‡®ðŸ‡³ Telugu"})]}):e.jsxs("div",{className:"field-value",children:[r.language==="en"&&"ðŸ‡ºðŸ‡¸ English",r.language==="hi"&&"ðŸ‡®ðŸ‡³ Hindi",r.language==="mr"&&"ðŸ‡®ðŸ‡³ Marathi",r.language==="bn"&&"ðŸ‡®ðŸ‡³ Bengali",r.language==="ta"&&"ðŸ‡®ðŸ‡³ Tamil",r.language==="te"&&"ðŸ‡®ðŸ‡³ Telugu"]})]})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("div",{className:"field-icon",children:e.jsx(oe,{size:20})}),e.jsxs("div",{className:"field-content",children:[e.jsx("label",{children:"Location"}),g?e.jsx("input",{type:"text",value:r.location,onChange:t=>h({...r,location:t.target.value}),placeholder:"City, State",className:"field-input"}):e.jsxs("div",{className:"field-value",children:["ðŸ“ ",c?.location]})]})]})]})]}),(p==="history"||window.innerWidth>768)&&e.jsxs("div",{className:"activity-card glass-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"header-icon",children:e.jsx(se,{size:24})}),e.jsxs("div",{className:"header-content",children:[e.jsx("h3",{children:"Query History"}),e.jsx("p",{children:"Your recent interactions with Gram Vaani"})]})]}),u.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"ðŸ’¬"}),e.jsx("h4",{children:"No queries yet"}),e.jsx("p",{children:"Start asking questions to see your history here!"})]}):e.jsx("div",{className:"queries-timeline",children:u.slice(0,10).map((t,w)=>e.jsxs("div",{className:"timeline-item",children:[e.jsx("div",{className:"timeline-marker",style:{backgroundColor:j(t.type)},children:e.jsx("span",{children:$(t.type)})}),e.jsxs("div",{className:"timeline-content",children:[e.jsxs("div",{className:"timeline-header",children:[e.jsx("span",{className:"query-type-badge",style:{backgroundColor:j(t.type)},children:t.type}),e.jsx("span",{className:"query-time",children:new Date(t.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:"query-text",children:t.query}),t.response&&e.jsx("div",{className:"query-response",children:t.response.length>120?`${t.response.substring(0,120)}...`:t.response})]})]},w))})]})]}),e.jsxs("div",{className:"profile-sidebar",children:[(p==="stats"||window.innerWidth>768)&&e.jsxs("div",{className:"stats-card glass-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"header-icon",children:e.jsx(Z,{size:24})}),e.jsxs("div",{className:"header-content",children:[e.jsx("h3",{children:"Activity Stats"}),e.jsx("p",{children:"Your usage overview"})]})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(Le,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:v.total}),e.jsx("div",{className:"stat-label",children:"Total Queries"})]})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(Ae,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:v.thisWeek}),e.jsx("div",{className:"stat-label",children:"This Week"})]})]})]})]}),(p==="types"||window.innerWidth>768)&&e.jsxs("div",{className:"types-card glass-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"header-icon",children:e.jsx(ee,{size:24})}),e.jsxs("div",{className:"header-content",children:[e.jsx("h3",{children:"Query Types"}),e.jsx("p",{children:"What you ask about most"})]})]}),e.jsx("div",{className:"types-list",children:Object.entries(v.types).map(([t,w])=>e.jsxs("div",{className:"type-item",children:[e.jsx("div",{className:"type-icon",style:{backgroundColor:j(t)},children:$(t)}),e.jsxs("div",{className:"type-content",children:[e.jsx("div",{className:"type-name",children:t}),e.jsxs("div",{className:"type-count",children:[w," queries"]})]}),e.jsx("div",{className:"type-bar",children:e.jsx("div",{className:"type-progress",style:{width:`${w/v.total*100}%`,backgroundColor:j(t)}})})]},t))})]})]})]})]})]})}function Fe(){const[c,i]=a.useState(!1),[d,g]=a.useState(null),[o,r]=a.useState(!1),[h,u]=a.useState(!1),[x,y]=a.useState(""),[f,m]=a.useState(""),[N,v]=a.useState(null),[M,b]=a.useState(!1),[l,p]=a.useState(""),[k,R]=a.useState("voice"),[S,I]=a.useState("en"),[Q,$]=a.useState(!1),[j,t]=a.useState(""),[w,A]=a.useState(""),[F,T]=a.useState(""),[E,D]=a.useState(!1),B=a.useRef(null),C=a.useRef(null),J=a.useRef([]);a.useEffect(()=>{ce()},[]);const ce=async()=>{const s=localStorage.getItem("token");if(s)try{const n=await L.get(`${_}/api/me`,{headers:{Authorization:`Bearer ${s}`}});g(n.data),I(n.data.language),i(!0)}catch{localStorage.removeItem("token"),i(!1)}},le=async s=>{try{const n=await L.get(`${_}/api/me`,{headers:{Authorization:`Bearer ${s}`}});g(n.data),I(n.data.language),i(!0)}catch{localStorage.removeItem("token")}},de=()=>{localStorage.removeItem("token"),i(!1),g(null),y(""),m(""),v(null)},ue=async()=>{try{m(""),y(""),v(null);const s=await navigator.mediaDevices.getUserMedia({audio:!0});B.current=new MediaRecorder(s),J.current=[],B.current.ondataavailable=n=>{J.current.push(n.data)},B.current.onstop=async()=>{const n=new Blob(J.current,{type:"audio/wav"});await me(n),s.getTracks().forEach(P=>P.stop())},B.current.start(),r(!0)}catch{m("Microphone access denied. Please allow microphone access and try again.")}},he=()=>{B.current&&o&&(B.current.stop(),r(!1))},me=async s=>{u(!0),m("");try{const n=localStorage.getItem("token"),P=new FormData;P.append("file",s),P.append("language",S);const z=await L.post(`${_}/process-audio`,P,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${n}`}});if(y({transcript:z.data.transcript,response_text:z.data.response_text}),z.data.audio_data){const U=new Blob([Uint8Array.from(atob(z.data.audio_data),fe=>fe.charCodeAt(0))],{type:"audio/wav"}),ve=URL.createObjectURL(U);v(ve),setTimeout(()=>{C.current&&(C.current.play(),b(!0))},100)}}catch(n){m("Failed to process audio"),console.error(n)}finally{u(!1)}},pe=async()=>{if(!l.trim()){m("Please enter some text to process.");return}u(!0),m(""),y(""),v(null);try{const s=localStorage.getItem("token"),n=await L.post(`${_}/process-text`,{text:l.trim(),language:S},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(y({transcript:l,response_text:n.data.response_text||n.data}),n.data.audio_data){const P=new Blob([Uint8Array.from(atob(n.data.audio_data),U=>U.charCodeAt(0))],{type:"audio/wav"}),z=URL.createObjectURL(P);v(z),setTimeout(()=>{C.current&&(C.current.play(),b(!0))},100)}}catch(s){const n=s.response?.data?.detail||"Failed to process text. Please try again.";m(n),console.error("Error processing text:",s)}finally{u(!1)}},xe=()=>{C.current&&(M?(C.current.pause(),b(!1)):(C.current.play(),b(!0)))},je=()=>b(!1),V=s=>{if(t(s),s==="weather"&&d?.location){const n=d.location.split(",")[0].trim();A(n)}else A("");s==="crop"&&d?.location?T(d.location):T(""),$(!0)},ge=async()=>{u(!0),m(""),y(""),v(null);try{const s=localStorage.getItem("token"),n=await L.post(`${_}/api/weather`,{city:"current",language:S},{headers:{Authorization:`Bearer ${s}`}});if(y({transcript:`Weather for my location (${d?.location})`,response_text:n.data.text}),n.data.audio_data){const P=new Blob([Uint8Array.from(atob(n.data.audio_data),U=>U.charCodeAt(0))],{type:"audio/wav"}),z=URL.createObjectURL(P);v(z),setTimeout(()=>{C.current&&(C.current.play(),b(!0))},100)}}catch{m("Unable to fetch weather information for your location.")}finally{u(!1)}},K=()=>{$(!1),A(""),T("")},Y=async()=>{if(w.trim()){$(!1),u(!0);try{const s=localStorage.getItem("token");let n;if(j==="weather"?n=await L.post(`${_}/api/weather`,{city:w,language:S},{headers:{Authorization:`Bearer ${s}`}}):j==="crop"?n=await L.post(`${_}/api/crop-prices`,{crop:w,market:F||void 0,language:S},{headers:{Authorization:`Bearer ${s}`}}):j==="schemes"&&(n=await L.post(`${_}/api/gov-schemes`,{topic:w,language:S},{headers:{Authorization:`Bearer ${s}`}})),y({transcript:w,response_text:n.data.text}),n.data.audio_data){const P=new Blob([Uint8Array.from(atob(n.data.audio_data),U=>U.charCodeAt(0))],{type:"audio/wav"}),z=URL.createObjectURL(P);v(z),setTimeout(()=>{C.current&&(C.current.play(),b(!0))},100)}}catch{m(`Unable to fetch ${j} information.`)}finally{u(!1),A(""),T("")}}};return c?E?e.jsx(We,{user:d,onBack:()=>D(!1),onUserUpdate:s=>g({...d,...s})}):e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"header",children:e.jsxs("div",{className:"logo",children:[e.jsx("div",{className:"logo-icon",children:"ðŸŒ¾"}),e.jsxs("div",{className:"logo-text",children:[e.jsx("h1",{children:"Gram Vaani"}),e.jsx("p",{children:"AI Voice Assistant for Rural India"})]}),e.jsxs("div",{className:"user-info",children:[e.jsxs("div",{className:"user-details",children:[e.jsx("span",{className:"user-email",children:d?.email}),e.jsxs("span",{className:"user-location",children:["ðŸ“ ",d?.location]})]}),e.jsxs("div",{className:"user-actions",children:[e.jsx("button",{onClick:()=>D(!0),className:"profile-btn",children:e.jsx(q,{size:20})}),e.jsx("button",{onClick:de,className:"logout-btn",children:e.jsx(ze,{size:20})})]})]})]})}),e.jsxs("div",{className:"main-card",children:[e.jsxs("div",{className:"input-mode-selector",children:[e.jsx("button",{className:`mode-button ${k==="voice"?"active":""}`,onClick:()=>R("voice"),children:"ðŸŽ¤ Voice"}),e.jsx("button",{className:`mode-button ${k==="text"?"active":""}`,onClick:()=>R("text"),children:"âœ Text"})]}),k==="voice"?e.jsxs("div",{className:"voice-section",children:[e.jsx("button",{className:`voice-button ${o?"recording":""}`,onClick:o?he:ue,disabled:h,children:h?e.jsx(H,{className:"loading"}):o?e.jsx(_e,{size:40}):e.jsx(Ie,{size:40})}),e.jsx("div",{className:"status-text",children:o?"ðŸŽ¤ Listening... Click to stop":h?"ðŸ¤– Processing your request...":"ðŸ‘† Click to speak in your local dialect"}),e.jsxs("div",{className:"language-selector-inline",children:[e.jsx("div",{className:"language-icon",children:"ðŸŒ"}),e.jsxs("select",{value:S,onChange:s=>I(s.target.value),children:[e.jsx("option",{value:"en",children:"ðŸ‡ºðŸ‡¸ English"}),e.jsx("option",{value:"hi",children:"ðŸ‡®ðŸ‡³ Hindi"}),e.jsx("option",{value:"mr",children:"ðŸ‡®ðŸ‡³ Marathi"}),e.jsx("option",{value:"bn",children:"ðŸ‡®ðŸ‡³ Bengali"}),e.jsx("option",{value:"ta",children:"ðŸ‡®ðŸ‡³ Tamil"}),e.jsx("option",{value:"te",children:"ðŸ‡®ðŸ‡³ Telugu"})]})]})]}):e.jsxs("div",{className:"text-section",children:[e.jsx("textarea",{value:l,onChange:s=>p(s.target.value),placeholder:"Type your question here...",className:"text-input",rows:3,disabled:h}),e.jsxs("div",{className:"text-controls",children:[e.jsx("button",{className:"submit-button",onClick:pe,disabled:h||!l.trim(),children:h?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"loading",size:16})," Processing..."]}):"Submit Question"}),e.jsxs("div",{className:"language-selector-inline",children:[e.jsx("div",{className:"language-icon",children:"ðŸŒ"}),e.jsxs("select",{value:S,onChange:s=>I(s.target.value),children:[e.jsx("option",{value:"en",children:"ðŸ‡ºðŸ‡¸ English"}),e.jsx("option",{value:"hi",children:"ðŸ‡®ðŸ‡³ Hindi"}),e.jsx("option",{value:"mr",children:"ðŸ‡®ðŸ‡³ Marathi"}),e.jsx("option",{value:"bn",children:"ðŸ‡®ðŸ‡³ Bengali"}),e.jsx("option",{value:"ta",children:"ðŸ‡®ðŸ‡³ Tamil"}),e.jsx("option",{value:"te",children:"ðŸ‡®ðŸ‡³ Telugu"})]})]})]})]}),e.jsxs("div",{className:"feature-buttons",children:[e.jsxs("button",{className:"feature-card",onClick:ge,disabled:h,children:[e.jsx("div",{className:"icon",children:"ðŸŒ¤"}),e.jsx("div",{className:"title",children:"My Weather"}),e.jsxs("div",{className:"description",children:["Current weather for ",d?.location?.split(",")[0]||"your location"]})]}),e.jsxs("button",{className:"feature-card",onClick:()=>V("weather"),children:[e.jsx("div",{className:"icon",children:"ðŸŒ"}),e.jsx("div",{className:"title",children:"Other City Weather"}),e.jsx("div",{className:"description",children:"Check weather for any city"})]}),e.jsxs("button",{className:"feature-card",onClick:()=>V("crop"),children:[e.jsx("div",{className:"icon",children:"ðŸ’°"}),e.jsx("div",{className:"title",children:"Crop Prices"}),e.jsx("div",{className:"description",children:"Check prices for any crop"})]}),e.jsxs("button",{className:"feature-card",onClick:()=>V("schemes"),children:[e.jsx("div",{className:"icon",children:"ðŸ›"}),e.jsx("div",{className:"title",children:"Govt Schemes"}),e.jsx("div",{className:"description",children:"Learn about government schemes"})]})]}),f&&e.jsx("div",{className:"error-message",children:f}),x&&e.jsxs("div",{className:"response-section",children:[e.jsx("h3",{children:"ðŸ“ What you said:"}),e.jsx("p",{className:"response-text",children:x.transcript}),e.jsx("h3",{children:"ðŸ’¬ Response:"}),e.jsx("p",{className:"response-text",children:x.response_text}),N&&e.jsxs("div",{className:"audio-controls",children:[e.jsxs("button",{className:"play-button",onClick:xe,children:[M?e.jsx(Me,{size:20}):e.jsx(Te,{size:20}),M?"Pause":"Play Response"]}),e.jsx("audio",{ref:C,src:N,onEnded:je})]})]})]}),Q&&e.jsx("div",{className:"modal-overlay",onClick:K,children:e.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[j==="weather"&&"ðŸŒ¤ Weather Information",j==="crop"&&"ðŸ’° Crop Prices",j==="schemes"&&"ðŸ› Government Schemes"]}),e.jsx("button",{className:"close-button",onClick:K,children:"Ã—"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("label",{children:[j==="weather"&&"Enter city name:",j==="crop"&&"Enter crop name:",j==="schemes"&&"Enter topic (e.g., irrigation, fertilizer):"]}),e.jsx("input",{type:"text",value:w,onChange:s=>A(s.target.value),placeholder:j==="weather"?"e.g., Delhi, Mumbai, Bangalore":j==="crop"?"e.g., Rice, Wheat, Cotton, Sugarcane":"e.g., Irrigation, Seeds, Fertilizer, Loan",onKeyPress:s=>s.key==="Enter"&&Y(),autoFocus:!0}),j==="crop"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{style:{marginTop:"15px",display:"block"},children:"Location (market):"}),e.jsx("input",{type:"text",value:F,onChange:s=>T(s.target.value),placeholder:"e.g., Delhi, Mumbai (defaults to your location)",onKeyPress:s=>s.key==="Enter"&&Y()})]}),j==="weather"&&e.jsxs("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px"},children:['ðŸ’¡ Tip: Use "My Weather" button above for your location (',d?.location,")"]}),j==="crop"&&e.jsxs("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px"},children:["ðŸ’¡ Location defaults to: ",d?.location||"your profile location"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"cancel-button",onClick:K,children:"Cancel"}),e.jsx("button",{className:"submit-button",onClick:Y,disabled:!w.trim(),children:"Get Information"})]})]})})]}):e.jsx(qe,{onLogin:le})}Oe.createRoot(document.getElementById("root")).render(e.jsx(Ee.StrictMode,{children:e.jsx(Fe,{})}));
